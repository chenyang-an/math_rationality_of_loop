
import json
import sys
# Sample data points
import numpy as np

#load("/Users/an/Desktop/cm/rationality_of_loop/interpolation.py")
def objective(params):
    a_val, b_val, c_val, d_val, e_val, f_val = params
    residuals = [model.subs({x: x_data[i], a: a_val, b: b_val, c: c_val, d: d_val, e: e_val, f: f_val}) - y_data[i] for i in range(len(x_data))]
    return sum([r**2 for r in residuals])


if __name__ == '__main__':

    x_data = np.array([10.0, 9.899497487437186, 9.798994974874372, 9.698492462311558, 9.597989949748744, 9.49748743718593, 9.396984924623116, 9.296482412060302, 9.195979899497488, 9.095477386934673, 8.99497487437186, 8.894472361809045, 8.793969849246231, 8.693467336683417, 8.592964824120603, 8.492462311557789, 8.391959798994975, 8.291457286432161, 8.190954773869347, 8.090452261306533, 7.989949748743719, 7.889447236180905, 7.788944723618091, 7.688442211055277, 7.5879396984924625, 7.4874371859296485, 7.386934673366834, 7.28643216080402, 7.185929648241206, 7.085427135678392, 6.984924623115578, 6.884422110552764, 6.78391959798995, 6.683417085427136, 6.582914572864322, 6.482412060301508, 6.381909547738694, 6.28140703517588, 6.180904522613066, 6.080402010050252, 5.979899497487437, 5.879396984924623, 5.7788944723618085, 5.6783919597989945, 5.57788944723618, 5.477386934673366, 5.376884422110552, 5.276381909547738, 5.175879396984924, 5.07537688442211, 4.974874371859296, 4.874371859296482, 4.773869346733668, 4.673366834170854, 4.57286432160804, 4.472361809045226, 4.371859296482412, 4.271356783919598, 4.1708542713567835, 4.0703517587939695, 3.9698492462311554, 3.8693467336683414, 3.7688442211055273, 3.6683417085427132, 3.567839195979899, 3.467336683417085, 3.366834170854271, 3.266331658291457, 3.165829145728643, 3.065326633165829, 2.964824120603015, 2.8643216080402008, 2.7638190954773867, 2.6633165829145726, 2.5628140703517586, 2.4623115577889445, 2.3618090452261304, 2.2613065326633164, 2.1608040201005023, 2.0603015075376883, 1.9597989949748733, 1.8592964824120592, 1.7587939698492452, 1.6582914572864311, 1.557788944723617, 1.457286432160803, 1.356783919597989, 1.2562814070351749, 1.1557788944723608, 1.0552763819095468, 0.9547738693467327, 0.8542713567839186, 0.7537688442211046, 0.6532663316582905, 0.5527638190954764, 0.4522613065326624, 0.3517587939698483, 0.25125628140703427, 0.1507537688442202, 0.05025125628140614, -0.05025125628140792, -0.15075376884422198, -0.25125628140703604, -0.3517587939698501, -0.45226130653266416, -0.5527638190954782, -0.6532663316582923, -0.7537688442211063, -0.8542713567839204, -0.9547738693467345, -1.0552763819095485, -1.1557788944723626, -1.2562814070351767, -1.3567839195979907, -1.4572864321608048, -1.5577889447236188, -1.658291457286433, -1.758793969849247, -1.859296482412061, -1.959798994974875, -2.060301507537689, -2.160804020100503, -2.2613065326633173, -2.3618090452261313, -2.4623115577889454, -2.5628140703517595, -2.6633165829145735, -2.7638190954773876, -2.8643216080402016, -2.9648241206030157, -3.0653266331658298, -3.165829145728644, -3.266331658291458, -3.366834170854272, -3.467336683417086, -3.5678391959799, -3.668341708542714, -3.768844221105528, -3.8693467336683423, -3.9698492462311563, -4.07035175879397, -4.170854271356784, -4.2713567839195985, -4.371859296482413, -4.472361809045227, -4.572864321608041, -4.673366834170855, -4.773869346733669, -4.874371859296483, -4.974874371859297, -5.075376884422111, -5.175879396984925, -5.276381909547739, -5.376884422110553, -5.477386934673367, -5.577889447236181, -5.678391959798995, -5.778894472361809, -5.8793969849246235, -5.9798994974874375, -6.080402010050253, -6.180904522613066, -6.2814070351758815, -6.381909547738694, -6.48241206030151, -6.582914572864322, -6.683417085427138, -6.78391959798995, -6.884422110552766, -6.984924623115578, -7.085427135678394, -7.185929648241206, -7.286432160804022, -7.386934673366834, -7.48743718592965, -7.5879396984924625, -7.688442211055278, -7.788944723618091, -7.8894472361809065, -7.989949748743719, -8.090452261306535, -8.190954773869347, -8.291457286432163, -8.391959798994975, -8.49246231155779, -8.592964824120603, -8.693467336683419, -8.793969849246231, -8.894472361809047, -8.99497487437186, -9.095477386934675, -9.195979899497488, -9.296482412060303, -9.396984924623116, -9.497487437185931, -9.597989949748744, -9.69849246231156, -9.798994974874372, -9.899497487437188, -10.0]
)
    y_data = np.array([0.37969924812030076, 0.3797953939418363, 0.3798945235388997, 0.37999676177636355, 0.3801022401257655, 0.3802110970896565, 0.3803234786581215, 0.38043953880029446, 0.38055943999396824, 0.3806833537967174, 0.38081146146229583, 0.3809439546064645, 0.3810810359268358, 0.3812229199818069, 0.38136983403419755, 0.38152201896581583, 0.38167973026985696, 0.38184323912880985, 0.38201283358640287, 0.38218881982309855, 0.3823715235457394, 0.38256129150318646, 0.3827584931411951, 0.3829635224113602, 0.38317679975077085, 0.3833987742510603, 0.3836299260378807, 0.383870768884494, 0.3841218530862227, 0.3843837686259944, 0.38465714866522066, 0.38494267339885835, 0.3852410743188065, 0.3855531389359208, 0.38587971601801013, 0.38622172140940064, 0.38658014450719663, 0.3869560554804933, 0.387350613331772, 0.3877650749149146, 0.38820080504210014, 0.3886592878328345, 0.3891421394831136, 0.389651122662021, 0.39018816277781104, 0.39075536639691194, 0.39135504214868766, 0.3919897245079912, 0.3926622009186967, 0.39337554280725173, 0.3941331411392344, 0.3949387472982673, 0.39579652022084927, 0.39671108090967283, 0.39768757568063295, 0.3987317497864197, 0.39985003341701253, 0.401049642523731, 0.40233869747374723, 0.4037263632491347, 0.4052230158022695, 0.40684044032608935, 0.4085920686717647, 0.4104932650541421, 0.41256167167223373, 0.4148176291385828, 0.4172846909366121, 0.4199902569015129, 0.42296635850539954, 0.426250639322639, 0.429887588621813, 0.4339301062937352, 0.43844150584544245, 0.44349810285802854, 0.44919259511650195, 0.45563852697494245, 0.4629762594505443, 0.471381063578743, 0.48107425867751247, 0.49233879952401954, 0.5055415006003879, 0.5211653959948742, 0.5398579925799127, 0.562505208346486, 0.5903482898732307, 0.6251756239070889, 0.6696514668709007, 0.7279098284687672, 0.8066994575549867, 0.9177808317312275, 1.0835170182921612, 1.352011210673828, 1.8482807198555595, 3.026947390978268, 8.813672008182905, -9.936328287737627, -3.3374081295935016, -2.133424546468018, -1.687494791811336, -1.5191321649957903, -1.5191321649957916, -1.687494791811341, -2.1334245464680306, -3.337408129593538, -9.936328287737986, 8.813672008182609, 3.026947390978233, 1.8482807198555469, 1.3520112106738218, 1.0835170182921576, 0.917780831731225, 0.806699457554985, 0.7279098284687661, 0.6696514668708998, 0.6251756239070884, 0.5903482898732302, 0.5625052083464855, 0.5398579925799123, 0.5211653959948739, 0.5055415006003877, 0.49233879952401943, 0.4810742586775123, 0.4713810635787429, 0.46297625945054427, 0.4556385269749424, 0.44919259511650184, 0.44349810285802843, 0.4384415058454424, 0.4339301062937351, 0.42988758862181303, 0.4262506393226389, 0.4229663585053996, 0.41999025690151287, 0.41728469093661213, 0.4148176291385828, 0.41256167167223373, 0.410493265054142, 0.4085920686717647, 0.40684044032608935, 0.40522301580226955, 0.40372636324913463, 0.4023386974737472, 0.4010496425237308, 0.3998500334170125, 0.3987317497864196, 0.397687575680633, 0.3967110809096728, 0.39579652022084927, 0.3949387472982673, 0.3941331411392345, 0.3933755428072518, 0.3926622009186967, 0.39198972450799113, 0.39135504214868766, 0.3907553663969119, 0.3901881627778111, 0.3896511226620211, 0.38914213948311355, 0.3886592878328344, 0.38820080504210014, 0.3877650749149145, 0.387350613331772, 0.3869560554804933, 0.38658014450719663, 0.38622172140940053, 0.38587971601801013, 0.3855531389359208, 0.3852410743188065, 0.38494267339885824, 0.38465714866522066, 0.38438376862599444, 0.3841218530862227, 0.38387076888449406, 0.3836299260378807, 0.38339877425106034, 0.38317679975077085, 0.38296352241136017, 0.3827584931411951, 0.38256129150318646, 0.3823715235457394, 0.3821888198230985, 0.38201283358640287, 0.3818432391288099, 0.38167973026985696, 0.38152201896581567, 0.38136983403419755, 0.38122291998180685, 0.3810810359268358, 0.3809439546064645, 0.38081146146229583, 0.3806833537967174, 0.38055943999396824, 0.3804395388002944, 0.3803234786581215, 0.38021109708965645, 0.3801022401257655, 0.3799967617763635, 0.3798945235388997, 0.3797953939418363, 0.37969924812030076]
)
    var('x a b c d e f')

    # Define the quadratic equation
    model = (a * x ** 2 + b * x + c)/(d * x ** 2 + e * x + f)

    print(model)

    initial_guess = [1, 1, 1, 1, 1, 1]

    # Perform the optimization
    opt = minimize(objective, initial_guess)

    # Extract the optimized parameters
    #a_opt, b_opt, c_opt = opt

    print(opt)


